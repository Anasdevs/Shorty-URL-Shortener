{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>Shorty - URL Shortener</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">
</head>
<body>
    <h1>Welcome to Shorty - URL Shortener</h1>
    
    {% if error_message %}
    <p style="color: red;">{{ error_message }}</p>
    {% endif %}
    
    <form method="post" action="{% url 'index' %}">
        {% csrf_token %}
        <div class="form-main">

            <label for="original_url">Original URL:</label>
            <input type="url" id="original_url" name="original_url" required>
        
            <label for="custom_code">Custom Short Code (optional):</label>
            <input type="text" id="custom_code" name="custom_code">
        
            <label for="expiration_date">Expiration Date (optional):</label>
            <input type="datetime-local" id="expiration_date" name="expiration_date">
        
            <input type="submit" id="Shorten">
        </div>
    </form>

    {% if short_url_full %}
    <div id="short-url">
        <p>{{ short_url_full }}</p>
        <button class="copy-button" onclick="copyToClipboard('{{ short_url_full }}')">Copy</button>
    </div>
    {% endif %}

    <script>
        // JavaScript function to copy text to clipboard
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
    </script>
</body>
</html>
